{"ast":null,"code":"var _jsxFileName = \"/Users/agndj/Desktop/Coding/Fullstack Academy/Project-05/Strangers-Things-2/Strangers-Things-2/src/components/DetailedPostsFormat.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { useOutletContext, useParams, useNavigate } from \"react-router-dom\";\nimport EditPosts from \"./EditPosts\";\nimport Message from \"./Message\";\nimport MessageForm from \"./MessageForm\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DetailedPostsFormat = () => {\n  _s();\n  const [posts,, profileData, setProfileData, loggedIn] = useOutletContext();\n  const [detailedPost, setDetailedPost] = useState({});\n  const [toggleEditForm, setToggleEditForm] = useState(false);\n  const [toggleMessageForm, setToggleMessageForm] = useState(false);\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  function handleToggleEditForm() {\n    setToggleEditForm(!toggleEditForm);\n  }\n  function handleToggleMessageForm() {\n    setToggleMessageForm(!toggleMessageForm);\n  }\n  async function deletePost(event) {\n    event.preventDefault();\n    try {\n      const response = await fetch(`http://strangers-things.herokuapp.com/api/2209-ftb-mt-web-ft/posts/${detailedPost._id}`, {\n        method: \"DELETE\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${localStorage.getItem(\"token\")}`\n        }\n      });\n      const data = await response.json();\n      const userData = await fetch(\"https://strangers-things.herokuapp.com/api/2209-ftb-mt-web-ft/users/me\", {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${localStorage.getItem(\"token\")}`\n        }\n      });\n      const translatedUserData = await userData.json();\n      setProfileData(translatedUserData.data);\n      navigate(\"/profile\");\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  async function findSpecificPost() {\n    try {\n      const [specificPost] = await posts.filter(element => element._id == id);\n      setDetailedPost(specificPost);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  useEffect(() => {\n    findSpecificPost();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [toggleEditForm ? /*#__PURE__*/_jsxDEV(EditPosts, {\n      indivPost: detailedPost,\n      setProfileData: setProfileData,\n      handleToggleEditForm: handleToggleEditForm\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 32\n    }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n      children: detailedPost.title ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"detailed-post\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: detailedPost.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: detailedPost.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            children: [\"Location: \", detailedPost.location]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n            children: [\"Price: \", detailedPost.price]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n            children: [\"Willing to Deliver: \", detailedPost.willDeliver ? \"Yes\" : \"No\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 29\n          }, this), loggedIn ? detailedPost.author._id == profileData._id ? /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"button-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              id: \"edit-button\",\n              onClick: handleToggleEditForm,\n              children: \"EDIT\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              id: \"delete-button\",\n              onClick: deletePost,\n              children: \"DELETE\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 37\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"button-container\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              id: \"send-msg-btn\",\n              onClick: handleToggleMessageForm,\n              children: \"Message\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 41\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 37\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"button-container\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              id: \"send-msg-btn\",\n              onClick: () => navigate(\"/profile\"),\n              children: \"Login to message\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 25\n        }, this), toggleMessageForm ? /*#__PURE__*/_jsxDEV(MessageForm, {\n          indivPost: detailedPost,\n          handleToggleMessageForm: handleToggleMessageForm,\n          setDetailedPost: setDetailedPost,\n          findSpecificPost: findSpecificPost\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 47\n        }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Messages: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 29\n          }, this), profileData.messages.length ? profileData.messages.map((msg, idx) => {\n            return msg.post._id == detailedPost._id ? /*#__PURE__*/_jsxDEV(Message, {\n              msg: msg\n            }, idx, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 80\n            }, this) : null;\n          }) : /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"No essages Available\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 38\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Untitled Post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 23\n      }, this)\n      // If Not\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 9\n  }, this);\n};\n_s(DetailedPostsFormat, \"NGTRo+4mUcmchBiNwZDNdSIgieY=\", false, function () {\n  return [useOutletContext, useParams, useNavigate];\n});\n_c = DetailedPostsFormat;\nexport default DetailedPostsFormat;\nvar _c;\n$RefreshReg$(_c, \"DetailedPostsFormat\");","map":{"version":3,"names":["useEffect","useState","useOutletContext","useParams","useNavigate","EditPosts","Message","MessageForm","DetailedPostsFormat","posts","profileData","setProfileData","loggedIn","detailedPost","setDetailedPost","toggleEditForm","setToggleEditForm","toggleMessageForm","setToggleMessageForm","id","navigate","handleToggleEditForm","handleToggleMessageForm","deletePost","event","preventDefault","response","fetch","_id","method","headers","localStorage","getItem","data","json","userData","translatedUserData","error","console","log","findSpecificPost","specificPost","filter","element","title","description","location","price","willDeliver","author","messages","length","map","msg","idx","post"],"sources":["/Users/agndj/Desktop/Coding/Fullstack Academy/Project-05/Strangers-Things-2/Strangers-Things-2/src/components/DetailedPostsFormat.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useOutletContext, useParams, useNavigate } from \"react-router-dom\";\nimport EditPosts from \"./EditPosts\";\nimport Message from \"./Message\";\nimport MessageForm from \"./MessageForm\";\n\nconst DetailedPostsFormat = () => {\n    const [posts,, profileData, setProfileData, loggedIn] = useOutletContext();\n    const [detailedPost, setDetailedPost] = useState({});\n    const [toggleEditForm, setToggleEditForm] = useState(false);\n    const [toggleMessageForm, setToggleMessageForm] = useState(false);\n    const { id } = useParams();\n    const navigate = useNavigate();\n\n    function handleToggleEditForm() {\n        setToggleEditForm(!toggleEditForm);\n    }\n\n    function handleToggleMessageForm() {\n        setToggleMessageForm(!toggleMessageForm);\n    }\n\n    async function deletePost(event) {\n        event.preventDefault();\n\n        try {\n            const response = await fetch(\n                `http://strangers-things.herokuapp.com/api/2209-ftb-mt-web-ft/posts/${detailedPost._id}`,\n                {\n                    method: \"DELETE\",\n                    headers: {\n                        \"Content-Type\": \"application/json\",\n                        \"Authorization\": `Bearer ${localStorage.getItem(\"token\")}`\n                    }\n                }\n            )\n            const data = await response.json();\n\n            const userData = await fetch(\n                \"https://strangers-things.herokuapp.com/api/2209-ftb-mt-web-ft/users/me\",\n                {\n                    headers: {\n                        \"Content-Type\": \"application/json\",\n                        \"Authorization\": `Bearer ${localStorage.getItem(\"token\")}`\n                    },\n                })\n\n            const translatedUserData = await userData.json();\n            setProfileData(translatedUserData.data);\n            navigate(\"/profile\");\n\n        } catch(error) {\n            console.log(error);\n        }\n    }\n\n    async function findSpecificPost() {\n        try {\n\n            const [specificPost] = await posts.filter((element) => element._id == id);\n            setDetailedPost(specificPost);\n\n        } catch(error) {\n            console.log(error);\n        }\n    }\n\n    useEffect(() => {\n        findSpecificPost();\n    }, []);\n\n    return (\n        <div>\n            { toggleEditForm ? <EditPosts indivPost={detailedPost} setProfileData={setProfileData} handleToggleEditForm={handleToggleEditForm}/> : null }\n\n            <div>\n                {\n                    detailedPost.title ?\n                    <div>\n                        <div id=\"detailed-post\">\n                            <h2>{detailedPost.title}</h2>\n                            <p>{detailedPost.description}</p>\n                            <h4>Location: {detailedPost.location}</h4>\n                            <h5>Price: {detailedPost.price}</h5>\n                            <h5>Willing to Deliver: {detailedPost.willDeliver ? (\"Yes\") : (\"No\")}</h5>\n                            \n                            { loggedIn ?\n                                ( detailedPost.author._id == profileData._id ? \n                                    <div id=\"button-container\">\n                                        <button id=\"edit-button\" onClick={handleToggleEditForm}>EDIT</button>\n                                        <button id=\"delete-button\" onClick={deletePost}>DELETE</button>\n                                    </div>\n                                :\n                                    <div id=\"button-container\">\n                                        <button id=\"send-msg-btn\" onClick={handleToggleMessageForm}>Message</button>\n                                    </div>\n                                )\n                            : \n                            <div id=\"button-container\">\n                                <button id=\"send-msg-btn\" onClick={() => navigate(\"/profile\")}>Login to message</button>\n                            </div>\n                            }\n                        </div>\n\n                        { toggleMessageForm ? <MessageForm indivPost={detailedPost} handleToggleMessageForm={handleToggleMessageForm} setDetailedPost={setDetailedPost} findSpecificPost={findSpecificPost}/> : null }\n                        \n                        <div>\n                            <h3>Messages: </h3>\n                            {\n                                profileData.messages.length ? profileData.messages.map((msg, idx) => {\n                                    return (msg.post._id == detailedPost._id ? <Message key={idx} msg={msg}/> : null)\n                                }) : <p>No essages Available</p>\n                            }\n                        </div>\n\n                    </div>\n                    : <p>Untitled Post</p>\n                            // If Not\n                }\n\n            </div>\n        </div>\n    )\n\n}\n\nexport default DetailedPostsFormat;"],"mappings":"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"},"metadata":{},"sourceType":"module"}